"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("react"),n=(t=e)&&"object"==typeof t&&"default"in t?t.default:t;function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _objectWithoutProperties(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _slicedToArray(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var buildScriptContent=function(t){var e=function(t){return"\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', '".concat(t.gaCode,"', ").concat(JSON.stringify(t.config),");\n")}(t);return t.extraGaCodes?t.extraGaCodes.reduce((function(t,e){return t+"gtag('config', '".concat(e,"');\n")}),e):e},buildOnloadEvent=function(t,e,n){return function(){!function(t,e){var n=document.createElement("script");n.innerHTML=buildScriptContent(t),e.appendChild(n)}(t,e);var r=t.setSingleton();window.ga&&Object.assign(r,{ga:t.ga}),n(r)}},addScriptEvents=function(t,e,n,r,i){e.onload=buildOnloadEvent(t,n,r),e.onerror=function(t){return function(){t(new Error("Google Analytics failed to initialize!"))}}(i)},buildScriptTags=function(t,e,n){var r=document.getElementsByTagName("head")[0],i=function(t){var e=document.createElement("script");return e.setAttribute("async",""),e.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=".concat(t)),e}(t.gaCode);addScriptEvents(t,i,r,e,n),function(t,e){document.onreadystatechange=function(){"interactive"===document.readyState&&e.appendChild(t)}}(i,r)},r={},i=function GAController(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,GAController),this.setSingleton=function(){return Object.assign(r,{initialized:!0,pageview:e.pageview,event:e.event,gtag:e.gtag}),r},this.initialize=function(){return new Promise((function(t,n){GAController.isInitialized()?n(new Error("Google Analytics has already been initialized!")):buildScriptTags(e,t,n)}))},this.pageview=function(t,n,r){return e.gtag("event","page_view",{page_path:t,page_location:n||window.location,page_title:r||document.title})},this.event=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.gtag("event",t,{event_label:n,event_category:r,non_interaction:i})},this.customEvent=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.gtag("event",t,n)},this.ga=function(){var t;return(t=window).ga.apply(t,arguments)},this.gtag=function(){var t;return(t=window).gtag.apply(t,arguments)};var i=n.gaCodes,a=_objectWithoutProperties(n,["gaCodes"]);this.config=a,this.gaCode=t,this.extraGaCodes=i||[],this.initialized=!1};i.isInitialized=function(){return r.initialized},i.getInstance=function(){return i.isInitialized()?r:console.warn("Google Analytics is not initialized")};var injectChildren=function(t,n,r){return n&&t&&"function"==typeof r&&r(function(t,n){return e.Children.map(t,(function(t,r){return e.isValidElement(t)?(i=t)&&i.type&&void 0!==i.type.name?e.cloneElement(t,{ga4:n,index:r}):t:e.createElement(e.Fragment,null,t);var i}))}(t,n))},useRGA4Initialize=function(t,n){e.useEffect((function(){i.isInitialized()?function(t,e){var n=t.children,r=i.getInstance();injectChildren(n,r,e)}(t,n):function(t,e){var n=t.code,r=t.config,a=t.gaCodes,o=t.children;new i("".concat(n),r,a).initialize().then((function(t){injectChildren(o,t,e)})).catch((function(t){console.error(t.stack)}))}(t,n)}),[])},RGA4=function(t){var r=_slicedToArray(e.useState(null),2),i=r[0],a=r[1];return useRGA4Initialize(t,a),n.createElement(n.Fragment,null,i)},usePageView=function(t){return e.useEffect((function(){var e,n,r,a,o;i.isInitialized()?(n=(e=t).path,r=e.location,a=e.title,(o=i.getInstance())&&o.pageview(n,r,a)):function(t){var e=t.path,n=t.location,r=t.title,a=t.gaCode;new i(a).initialize().then((function(t){t.pageview(e,n,r)})).catch((function(t){console.error(t)}))}(t)}))};exports.RGA4=RGA4,exports.RGA4Injector=function(t){var r=t.code,i=t.children,a=_objectWithoutProperties(t,["code","children"]);return n.createElement(RGA4,{code:r},function(t,r){return e.isValidElement(t)?n.createElement(t,r):"function"==typeof t?t(r):e.createElement(e.Fragment,null,t)}(i,a))},exports.usePageView=usePageView,exports.useRGA4Initialize=useRGA4Initialize,exports.withPageView=function(t){var PageViewHoc=function(e){var r=e.path,i=e.location,a=e.title,o=e.gaCode;return usePageView({path:r,location:i,title:a,gaCode:o}),n.createElement(t,e)},e=t.displayName||t.name||"Component";return PageViewHoc.displayName="WithPageView(".concat(e,")"),PageViewHoc};
//# sourceMappingURL=rga4.js.map
