"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function asyncGeneratorStep(e,t,n,r,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,i)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r=t.createContext(null),buildScriptContent=function(e){var t=function(e){return"\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', '".concat(e.gaCode,"', ").concat(JSON.stringify(e.config),");\n")}(e);return e.extraGaCodes?e.extraGaCodes.reduce((function(e,t){return e+"gtag('config', '".concat(t,"');\n")}),t):t},buildOnloadEvent=function(e,t,n){return function(){!function(e,t){var n=document.createElement("script");n.innerHTML=buildScriptContent(e),t.appendChild(n)}(e,t);var r=e.setSingleton();window.ga&&Object.assign(r,{ga:e.ga}),n(r)}},addScriptEvents=function(e,t,n,r,i){return t.onload=buildOnloadEvent(e,n,r),t.onerror=function(e){return function(){e(new Error("Google Analytics failed to initialize!"))}}(i),t},isDocReady=function(){return"complete"===document.readyState||"interactive"===document.readyState},buildScriptTags=function(e,t,n){var r=document.getElementsByTagName("head")[0],i=function(e){var t=document.createElement("script");return t.setAttribute("async",""),t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=".concat(e)),t}(e.gaCode);addScriptEvents(e,i,r,t,n),function(e,t){isDocReady()?t.appendChild(e):document.onreadystatechange=function(){isDocReady()&&t.appendChild(e)}}(i,r)},i={PAGE_VIEW:Object.freeze({page_location:"location",page_title:"title"}),UA_EVENT_PROPS:Object.freeze({value:"value",action:"action",label:"event_label",category:"event_category",nonInteraction:"non_interaction"})},getEventMap=function(){return Object.freeze(i)},mapEventKeys=function(e,t){var n=function(e){var t=getEventMap();return"string"==typeof e?t[e]:e}(t);return Object.entries(n).reduce((function(t,n){var r=_slicedToArray(n,2),i=r[0],o=r[1];return"value"===i&&e[i]<0||e[i]&&(t[o]=e[i]),t}),{})},noOpOverride=function(e){return function(){console.error("Method ".concat(e," should be overwritten with GAController instance method!"))}},o={initialized:!1,gtag:noOpOverride("GAController#gtag"),uaEvent:noOpOverride("GAController#uaEvent"),pageView:noOpOverride("GAController#pageView"),event:noOpOverride("GAController#event")},a=function GAController(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];_classCallCheck(this,GAController),this.setSingleton=function(){return Object.assign(o,{initialized:!0,pageView:t.pageView.bind(t),uaEvent:t.uaEvent.bind(t),event:t.event.bind(t),gtag:t.gtag.bind(t)}),o},this.initialize=function(){return new Promise((function(e,n){GAController.isInitialized()?n(new Error("Google Analytics has already been initialized!")):buildScriptTags(t,e,n)}))},this.pageView=function(e){var n=e.location,r=void 0===n?window.location:n,i=e.title,o=void 0===i?document.title:i,a=mapEventKeys({location:r,title:o},"PAGE_VIEW");return t.gtag("event","page_view",a)},this.uaEvent=function(e){var n=e.action,r=_objectWithoutProperties(e,["action"]),i=mapEventKeys(r,"UA_EVENT_PROPS");return t.gtag("event",n,i)},this.event=function(e,n){return"string"==typeof e||n||(e=(n=e).name,delete n.name),e&&"string"==typeof e?t.gtag("event",e,n):console.warn("Invalid event arguments. Action name and properties are required!")},this.ga=function(){var e;return(e=window).ga.apply(e,arguments)},this.gtag=function(){var e;return(e=window).gtag.apply(e,arguments)},this.config=n,this.gaCode=e,this.extraGaCodes=r||[],this.initialized=!1};a.isInitialized=function(){return o.initialized},a.getInstance=function(e){return a.isInitialized()?o:e&&console.warn("Google Analytics is not initialized")};var c,u,l=(c=regeneratorRuntime.mark((function _callee(e,t){var n,r,i,o,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n=e.code,r=e.config,i=e.gaCodes,o=new a(n,r,i),u.next=4,o.initialize();case 4:c=u.sent,t(c);case 6:case"end":return u.stop()}}),_callee)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=c.apply(e,t);function _next(e){asyncGeneratorStep(i,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,r,_next,_throw,"throw",e)}_next(void 0)}))},function(e,t){return u.apply(this,arguments)}),useRGA4=function(){return t.useContext(r)};exports.RGA4Provider=function(e){var i=e.children,o=_objectWithoutProperties(e,["children"]),c=_slicedToArray(t.useState(a.getInstance()),2),u=c[0],s=c[1];return t.useEffect((function(){!a.isInitialized()&&l(o,s)}),[o,u,s]),n.createElement(r.Provider,{value:u},i)},exports.useRGA4=useRGA4,exports.withRGA4=function(e){var RGA4Hoc=function(t){var r=useRGA4();return n.createElement(e,_extends({},t,{rga4:r}))},t=e.displayName||e.name||"Component";return RGA4Hoc.displayName="WithRGA4(".concat(t,")"),RGA4Hoc};
//# sourceMappingURL=rga4.js.map
