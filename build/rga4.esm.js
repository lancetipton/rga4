import t,{Children as n,isValidElement as e,createElement as r,Fragment as i,cloneElement as a,useEffect as o,useState as c}from"react";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _objectWithoutProperties(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}function _slicedToArray(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var buildScriptContent=function(t){var n=function(t){return"\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', '".concat(t.gaCode,"', ").concat(JSON.stringify(t.config),");\n")}(t);return t.extraGaCodes?t.extraGaCodes.reduce((function(t,n){return t+"gtag('config', '".concat(n,"');\n")}),n):n},buildOnloadEvent=function(t,n,e){return function(){!function(t,n){var e=document.createElement("script");e.innerHTML=buildScriptContent(t),n.appendChild(e)}(t,n);var r=t.setSingleton();window.ga&&Object.assign(r,{ga:t.ga}),e(r)}},addScriptEvents=function(t,n,e,r,i){n.onload=buildOnloadEvent(t,e,r),n.onerror=function(t){return function(){t(new Error("Google Analytics failed to initialize!"))}}(i)},buildScriptTags=function(t,n,e){var r=document.getElementsByTagName("head")[0],i=function(t){var n=document.createElement("script");return n.setAttribute("async",""),n.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=".concat(t)),n}(t.gaCode);addScriptEvents(t,i,r,n,e),function(t,n){document.onreadystatechange=function(){"interactive"===document.readyState&&n.appendChild(t)}}(i,r)},u={},l=function GAController(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,GAController),this.setSingleton=function(){return Object.assign(u,{initialized:!0,pageview:n.pageview,event:n.event,gtag:n.gtag}),u},this.initialize=function(){return new Promise((function(t,e){GAController.isInitialized()?e(new Error("Google Analytics has already been initialized!")):buildScriptTags(n,t,e)}))},this.pageview=function(t,e,r){return n.gtag("event","page_view",{page_path:t,page_location:e||window.location,page_title:r||document.title})},this.event=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.gtag("event",t,{event_label:e,event_category:r,non_interaction:i})},this.customEvent=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.gtag("event",t,e)},this.ga=function(){var t;return(t=window).ga.apply(t,arguments)},this.gtag=function(){var t;return(t=window).gtag.apply(t,arguments)};var r=e.gaCodes,i=_objectWithoutProperties(e,["gaCodes"]);this.config=i,this.gaCode=t,this.extraGaCodes=r||[],this.initialized=!1};l.isInitialized=function(){return u.initialized},l.getInstance=function(){return l.isInitialized()?u:console.warn("Google Analytics is not initialized")};var injectChildren=function(t,o,c){return o&&t&&"function"==typeof c&&c(function(t,o){return n.map(t,(function(t,n){return e(t)?(c=t)&&c.type&&void 0!==c.type.name?a(t,{ga4:o,index:n}):t:r(i,null,t);var c}))}(t,o))},useRGA4Initialize=function(t,n){o((function(){l.isInitialized()?function(t,n){var e=t.children,r=l.getInstance();injectChildren(e,r,n)}(t,n):function(t,n){var e=t.code,r=t.config,i=t.gaCodes,a=t.children;new l("".concat(e),r,i).initialize().then((function(t){injectChildren(a,t,n)})).catch((function(t){console.error(t.stack)}))}(t,n)}),[])},RGA4=function(n){var e=_slicedToArray(c(null),2),r=e[0],i=e[1];return useRGA4Initialize(n,i),t.createElement(t.Fragment,null,r)},RGA4Injector=function(n){var a=n.code,o=n.children,c=_objectWithoutProperties(n,["code","children"]);return t.createElement(RGA4,{code:a},function(n,a){return e(n)?t.createElement(n,a):"function"==typeof n?n(a):r(i,null,n)}(o,c))},usePageView=function(t){return o((function(){var n,e,r,i,a;l.isInitialized()?(e=(n=t).path,r=n.location,i=n.title,(a=l.getInstance())&&a.pageview(e,r,i)):function(t){var n=t.path,e=t.location,r=t.title,i=t.gaCode;new l(i).initialize().then((function(t){t.pageview(n,e,r)})).catch((function(t){console.error(t)}))}(t)}))},withPageView=function(n){var PageViewHoc=function(e){var r=e.path,i=e.location,a=e.title,o=e.gaCode;return usePageView({path:r,location:i,title:a,gaCode:o}),t.createElement(n,e)},e=n.displayName||n.name||"Component";return PageViewHoc.displayName="WithPageView(".concat(e,")"),PageViewHoc};export{RGA4,RGA4Injector,usePageView,useRGA4Initialize,withPageView};
//# sourceMappingURL=rga4.esm.js.map
